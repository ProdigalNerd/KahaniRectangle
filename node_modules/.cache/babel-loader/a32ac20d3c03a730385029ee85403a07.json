{"ast":null,"code":"import _classCallCheck from \"/Users/tylerwilson/Documents/GitHub/KahaniRectangle/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/tylerwilson/Documents/GitHub/KahaniRectangle/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/Users/tylerwilson/Documents/GitHub/KahaniRectangle/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/tylerwilson/Documents/GitHub/KahaniRectangle/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/tylerwilson/Documents/GitHub/KahaniRectangle/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/tylerwilson/Documents/GitHub/KahaniRectangle/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Util } from '../Util.js';\nimport { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport var Image = /*#__PURE__*/function (_Shape) {\n  _inherits(Image, _Shape);\n  var _super = _createSuper(Image);\n  function Image(attrs) {\n    var _this;\n    _classCallCheck(this, Image);\n    _this = _super.call(this, attrs);\n    _this.on('imageChange.konva', function () {\n      _this._setImageLoad();\n    });\n    _this._setImageLoad();\n    return _this;\n  }\n  _createClass(Image, [{\n    key: \"_setImageLoad\",\n    value: function _setImageLoad() {\n      var _this2 = this;\n      var image = this.image();\n      if (image && image.complete) {\n        return;\n      }\n      if (image && image.readyState === 4) {\n        return;\n      }\n      if (image && image['addEventListener']) {\n        image['addEventListener']('load', function () {\n          _this2._requestDraw();\n        });\n      }\n    }\n  }, {\n    key: \"_useBufferCanvas\",\n    value: function _useBufferCanvas() {\n      return _get(_getPrototypeOf(Image.prototype), \"_useBufferCanvas\", this).call(this, true);\n    }\n  }, {\n    key: \"_sceneFunc\",\n    value: function _sceneFunc(context) {\n      var width = this.getWidth();\n      var height = this.getHeight();\n      var image = this.attrs.image;\n      var params;\n      if (image) {\n        var cropWidth = this.attrs.cropWidth;\n        var cropHeight = this.attrs.cropHeight;\n        if (cropWidth && cropHeight) {\n          params = [image, this.cropX(), this.cropY(), cropWidth, cropHeight, 0, 0, width, height];\n        } else {\n          params = [image, 0, 0, width, height];\n        }\n      }\n      if (this.hasFill() || this.hasStroke()) {\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n      }\n      if (image) {\n        context.drawImage.apply(context, params);\n      }\n    }\n  }, {\n    key: \"_hitFunc\",\n    value: function _hitFunc(context) {\n      var width = this.width(),\n        height = this.height();\n      context.beginPath();\n      context.rect(0, 0, width, height);\n      context.closePath();\n      context.fillStrokeShape(this);\n    }\n  }, {\n    key: \"getWidth\",\n    value: function getWidth() {\n      var _a, _b;\n      return (_a = this.attrs.width) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.width;\n    }\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      var _a, _b;\n      return (_a = this.attrs.height) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.height;\n    }\n  }], [{\n    key: \"fromURL\",\n    value: function fromURL(url, callback) {\n      var onError = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var img = Util.createImageElement();\n      img.onload = function () {\n        var image = new Image({\n          image: img\n        });\n        callback(image);\n      };\n      img.onerror = onError;\n      img.crossOrigin = 'Anonymous';\n      img.src = url;\n    }\n  }]);\n  return Image;\n}(Shape);\nImage.prototype.className = 'Image';\n_registerNode(Image);\nFactory.addGetterSetter(Image, 'image');\nFactory.addComponentsGetterSetter(Image, 'crop', ['x', 'y', 'width', 'height']);\nFactory.addGetterSetter(Image, 'cropX', 0, getNumberValidator());\nFactory.addGetterSetter(Image, 'cropY', 0, getNumberValidator());\nFactory.addGetterSetter(Image, 'cropWidth', 0, getNumberValidator());\nFactory.addGetterSetter(Image, 'cropHeight', 0, getNumberValidator());","map":{"version":3,"names":["Util","Factory","Shape","getNumberValidator","_registerNode","Image","attrs","on","_setImageLoad","image","complete","readyState","_requestDraw","context","width","getWidth","height","getHeight","params","cropWidth","cropHeight","cropX","cropY","hasFill","hasStroke","beginPath","rect","closePath","fillStrokeShape","drawImage","apply","_a","_b","url","callback","onError","img","createImageElement","onload","onerror","crossOrigin","src","prototype","className","addGetterSetter","addComponentsGetterSetter"],"sources":["/Users/tylerwilson/Documents/GitHub/KahaniRectangle/node_modules/konva/lib/shapes/Image.js"],"sourcesContent":["import { Util } from '../Util.js';\nimport { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Image extends Shape {\n    constructor(attrs) {\n        super(attrs);\n        this.on('imageChange.konva', () => {\n            this._setImageLoad();\n        });\n        this._setImageLoad();\n    }\n    _setImageLoad() {\n        const image = this.image();\n        if (image && image.complete) {\n            return;\n        }\n        if (image && image.readyState === 4) {\n            return;\n        }\n        if (image && image['addEventListener']) {\n            image['addEventListener']('load', () => {\n                this._requestDraw();\n            });\n        }\n    }\n    _useBufferCanvas() {\n        return super._useBufferCanvas(true);\n    }\n    _sceneFunc(context) {\n        const width = this.getWidth();\n        const height = this.getHeight();\n        const image = this.attrs.image;\n        let params;\n        if (image) {\n            const cropWidth = this.attrs.cropWidth;\n            const cropHeight = this.attrs.cropHeight;\n            if (cropWidth && cropHeight) {\n                params = [\n                    image,\n                    this.cropX(),\n                    this.cropY(),\n                    cropWidth,\n                    cropHeight,\n                    0,\n                    0,\n                    width,\n                    height,\n                ];\n            }\n            else {\n                params = [image, 0, 0, width, height];\n            }\n        }\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            context.drawImage.apply(context, params);\n        }\n    }\n    _hitFunc(context) {\n        var width = this.width(), height = this.height();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        var _a, _b;\n        return (_a = this.attrs.width) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.width;\n    }\n    getHeight() {\n        var _a, _b;\n        return (_a = this.attrs.height) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.height;\n    }\n    static fromURL(url, callback, onError = null) {\n        var img = Util.createImageElement();\n        img.onload = function () {\n            var image = new Image({\n                image: img,\n            });\n            callback(image);\n        };\n        img.onerror = onError;\n        img.crossOrigin = 'Anonymous';\n        img.src = url;\n    }\n}\nImage.prototype.className = 'Image';\n_registerNode(Image);\nFactory.addGetterSetter(Image, 'image');\nFactory.addComponentsGetterSetter(Image, 'crop', ['x', 'y', 'width', 'height']);\nFactory.addGetterSetter(Image, 'cropX', 0, getNumberValidator());\nFactory.addGetterSetter(Image, 'cropY', 0, getNumberValidator());\nFactory.addGetterSetter(Image, 'cropWidth', 0, getNumberValidator());\nFactory.addGetterSetter(Image, 'cropHeight', 0, getNumberValidator());\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}